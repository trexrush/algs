---
  // import SetCard from "../components/SetCard.svelte";
  import SetCard from "../components/SetCard.astro";
  import type { IOptions, IDataSet } from "../scripts/types";

  interface Props {
    options: IOptions
    sets: IDataSet[]
  }
  const { sets, options } = Astro.props
---

<div id="collapse" class=" z-20 cursor-pointer sticky top-3 sm:top-12 bg-stone-200 dark:bg-stone-800 rounded-md p-1 px-2 
hover:brightness-110 hover:-translate-y-[1px] transition-all select-none">Collapse / Expand all Sets</div>

<div class=" relative text-3xl w-full text-center my-5">{options.name}</div>

{sets.map((set) => (
  <SetCard set={set} options={options} />
))}

<script>
  let globalOpenState = true
  let setCards = document.querySelectorAll('details:not(nav details)')
  document.getElementById('collapse')?.addEventListener("click", (e) => {
    for (let set of setCards) {
      globalOpenState ? set.removeAttribute('open') : set.setAttribute('open', 'true')
    }
    globalOpenState = !globalOpenState
  })
</script>